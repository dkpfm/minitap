<template>
  <div class="timeline">
    <svg
      width="166px"
      height="21px"
      viewBox="0 0 166 21"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <title>Timeline</title>
      <g
        id="Page-2"
        stroke="none"
        stroke-width="1"
        fill="none"
        fill-rule="evenodd"
      >
        <g id="Artboard-Copy-120" transform="translate(-152, -797)">
          <g id="Group-47" transform="translate(152, 679)">
            <g id="Group-4" transform="translate(0, 42.6448)">
              <g id="Group-51" transform="translate(0, 1)">
                <g id="Timeline" transform="translate(0, 75)">
                  <rect
                    id="BG"
                    fill="#3B84E3"
                    x="37"
                    y="0"
                    width="36"
                    height="20"
                    rx="4"
                  ></rect>
                  <g id="Bars" transform="translate(0, 4)" fill="#FFFFFF">
                    <g :style="barsStyle">
                      <g id="Bar3" transform="translate(112, 0)">
                        <path
                          d="M1,8 L11,8 C11.5522847,8 12,8.44771525 12,9 C12,9.55228475 11.5522847,10 11,10 L1,10 C0.44771525,10 3.38176876e-17,9.55228475 0,9 C-6.76353751e-17,8.44771525 0.44771525,8 1,8 Z"
                          id="Rectangle"
                        ></path>
                        <path
                          d="M15,8 L25,8 C25.5522847,8 26,8.44771525 26,9 C26,9.55228475 25.5522847,10 25,10 L15,10 C14.4477153,10 14,9.55228475 14,9 C14,8.44771525 14.4477153,8 15,8 Z"
                          id="Rectangle-Copy-55"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M29,8 L39,8 C39.5522847,8 40,8.44771525 40,9 C40,9.55228475 39.5522847,10 39,10 L29,10 C28.4477153,10 28,9.55228475 28,9 C28,8.44771525 28.4477153,8 29,8 Z"
                          id="Rectangle-Copy-56"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M43,8 L53,8 C53.5522847,8 54,8.44771525 54,9 C54,9.55228475 53.5522847,10 53,10 L43,10 C42.4477153,10 42,9.55228475 42,9 C42,8.44771525 42.4477153,8 43,8 Z"
                          id="Rectangle-Copy-57"
                          opacity="0.5"
                        ></path>
                        <text
                          id="1"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="1" y="6">1</tspan>
                        </text>
                        <text
                          id="2"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="14" y="6">2</tspan>
                        </text>
                        <text
                          id="3"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="28" y="6">3</tspan>
                        </text>
                        <text
                          id="4"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="43" y="6">4</tspan>
                        </text>
                      </g>
                      <g id="Bar2" transform="translate(56, 0)">
                        <path
                          d="M1,8 L11,8 C11.5522847,8 12,8.44771525 12,9 C12,9.55228475 11.5522847,10 11,10 L1,10 C0.44771525,10 3.38176876e-17,9.55228475 0,9 C-6.76353751e-17,8.44771525 0.44771525,8 1,8 Z"
                          id="Rectangle"
                        ></path>
                        <path
                          d="M15,8 L25,8 C25.5522847,8 26,8.44771525 26,9 C26,9.55228475 25.5522847,10 25,10 L15,10 C14.4477153,10 14,9.55228475 14,9 C14,8.44771525 14.4477153,8 15,8 Z"
                          id="Rectangle-Copy-55"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M29,8 L39,8 C39.5522847,8 40,8.44771525 40,9 C40,9.55228475 39.5522847,10 39,10 L29,10 C28.4477153,10 28,9.55228475 28,9 C28,8.44771525 28.4477153,8 29,8 Z"
                          id="Rectangle-Copy-56"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M43,8 L53,8 C53.5522847,8 54,8.44771525 54,9 C54,9.55228475 53.5522847,10 53,10 L43,10 C42.4477153,10 42,9.55228475 42,9 C42,8.44771525 42.4477153,8 43,8 Z"
                          id="Rectangle-Copy-57"
                          opacity="0.5"
                        ></path>
                        <text
                          id="1"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="1" y="6">1</tspan>
                        </text>
                        <text
                          id="2"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="14" y="6">2</tspan>
                        </text>
                        <text
                          id="3"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="28" y="6">3</tspan>
                        </text>
                        <text
                          id="4"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="42" y="6">4</tspan>
                        </text>
                      </g>
                      <g id="Bar">
                        <path
                          d="M1,8 L11,8 C11.5522847,8 12,8.44771525 12,9 C12,9.55228475 11.5522847,10 11,10 L1,10 C0.44771525,10 3.38176876e-17,9.55228475 0,9 C-6.76353751e-17,8.44771525 0.44771525,8 1,8 Z"
                          id="Rectangle"
                        ></path>
                        <path
                          d="M15,8 L25,8 C25.5522847,8 26,8.44771525 26,9 C26,9.55228475 25.5522847,10 25,10 L15,10 C14.4477153,10 14,9.55228475 14,9 C14,8.44771525 14.4477153,8 15,8 Z"
                          id="Rectangle-Copy-55"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M29,8 L39,8 C39.5522847,8 40,8.44771525 40,9 C40,9.55228475 39.5522847,10 39,10 L29,10 C28.4477153,10 28,9.55228475 28,9 C28,8.44771525 28.4477153,8 29,8 Z"
                          id="Rectangle-Copy-56"
                          opacity="0.5"
                        ></path>
                        <path
                          d="M43,8 L53,8 C53.5522847,8 54,8.44771525 54,9 C54,9.55228475 53.5522847,10 53,10 L43,10 C42.4477153,10 42,9.55228475 42,9 C42,8.44771525 42.4477153,8 43,8 Z"
                          id="Rectangle-Copy-57"
                          opacity="0.5"
                        ></path>
                        <text
                          id="1"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="1" y="6">1</tspan>
                        </text>
                        <text
                          id="2"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="14" y="6">2</tspan>
                        </text>
                        <text
                          id="3"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="28" y="6">3</tspan>
                        </text>
                        <text
                          id="4"
                          font-family="SFProDisplay-Bold, SF Pro Display"
                          font-size="6"
                          font-weight="bold"
                        >
                          <tspan x="42" y="6">4</tspan>
                        </text>
                      </g>
                    </g>
                  </g>
                  <path
                    d="M55.5,3 L55.5,16 C55.5,16.2761424 55.2761424,16.5 55,16.5 C54.7238576,16.5 54.5,16.2761424 54.5,16 L54.5,3 C54.5,2.72385763 54.7238576,2.5 55,2.5 C55.2761424,2.5 55.5,2.72385763 55.5,3 Z"
                    id="Now"
                    fill="#FFFFFF"
                    fill-rule="nonzero"
                  ></path>
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
</template>

<script setup>
import { ref, computed, watch } from 'vue'

const controllerClock = inject('controllerClock')

const barsStyle = computed(() => {
  return `transform: translateX(${(-controllerClock.currentTime.value % 8) * (55.4 / 8)}px)`
})
</script>

<style lang="scss" scoped>
.timeline {
  overflow: hidden;
  width: 38px;
  svg {
    position: relative;
    left: -36px;
  }
}
</style>
